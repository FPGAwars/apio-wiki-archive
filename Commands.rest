clean
=====

Remove the previous generated files. It does **not depend** on **apio.ini** file.

Testing
-------

```
$ apio clean
Using default SConstruct file
Executing: scons -Q -c -f /path/to/SConstruct
Removed hardware.blif
Removed hardware.asc
Removed hardware.bin
Removed hardware.out
```

verify
======

Verify the verilog code. It does **not depend** on **apio.ini** file.

Testing
-------

```
$ apio verify
Using default SConstruct file
Executing: scons -Q verify -f /path/to/SConstruct
iverilog -B /path/to/lib/ivl -o hardware.out /path/to/vlib/system.v leds.v
```

sim
===

Launch verilog simulation. It does **not depend** on **apio.ini** file.

Testing
-------

```
$ apio sim
Using default SConstruct file
Executing: scons -Q sim -f /path/to/SConstruct
gtkwave leds_tb.vcd leds_tb.gtkw

GTKWave Analyzer v3.3.66 (w)1999-2015 BSI

[0] start time.
[1000] end time.
WM Destroy
```

build
=====

Synthesize the bitstream. It **depends** on **apio.ini** file.

Arguments
---------

* **board**: icestick, icezum, go-board, ...
* **fpga**: iCE40-HX1K-TQ144, iCE40-HX1K-VQ100, ...
* **size**: 1k, 8k
* **type**: lp, hx
* **pack**: tq144, vq100, ...

board > fpga > size, type, pack

Testing
-------

No arguments
~~~~~~~~~~~~

If no arguments are provided it will use **apio.ini** board if exists.

```
$ apio build
Info: use apio.ini board: icezum
Using default SConstruct file
[...] Processing icezum
--------------------------------------------------------------------------------
Executing: scons -Q build fpga_type=hx fpga_pack=tq144 fpga_size=1k -f /path/to/SConstruct
FPGA_SIZE: 1k
FPGA_TYPE: hx
FPGA_PACK: tq144
...
```

Otherwise it will throw an error message.

```
$ apio build
Info: No apio.ini file
Error: insufficient arguments: missing board
You have two options:
  1) Execute your command with
       `--board <boardname>`
  2) Create an ini file using
       `apio init --board <boardname>`
```

If any argument is provided **apio.ini** file will be ignored.

Correct arguments
~~~~~~~~~~~~~~~~~

Command executed.

```
$ apio build --board icestick
[...] Processing icestick
```

```
$ apio build --fpga iCE40-HX1K-VQ100
[...] Processing custom board
```

```
$ apio build --type lp --size 8k --pack cm225:4k
[...] Processing custom board
```

#### Redundant arguments

Command executed with a warning message

E.g.

```
$ apio build --board icezum --size 1k
Warning: redundant arguments: size
[...] Processing icezum
```

```
$ apio build --board icezum --fpga iCE40-HX1K-TQ144 --type hx
Warning: redundant arguments: fpga, type
[...] Processing icezum
```

```
$ apio build --fpga iCE40-HX1K-TQ144 --pack vq100
Warning: redundant arguments: pack
[...] Processing custom board
```

#### Contradictory arguments

Command not executed. Print an error message

E.g.

```
$ apio build --board icezum --size 8k
Error: contradictory arguments: size
```

```
$ apio build --board icezum --fpga iCE40-HX1K-TQ144 --type lp
Warning: redundant arguments: fpga
Error: contradictory arguments: type
```

```
$ apio build --fpga iCE40-HX1K-TQ144 --type lp --size 8k
Error: contradictory arguments: type, size
```

#### Insufficient arguments

Command not executed. Print an error message

E.g.

```
$ apio build --size 8k
Error: insufficient arguments: missing type, pack
```

```
$ apio build --type lp --size 8k
Error: insufficient arguments: missing pack
```

#### Unknown board

Command not executed. Print an error message

E.g.

```
$ apio build --board icefake
Error: unknown board: icefake
```

```
$ apio build --board icefake --fpga iCE40-HX1K-TQ144
Error: unknown board: icefake
```

#### Unknown fpga

Command not executed. Print an error message

E.g.

```
$ apio build --fpga iCE40-FAKE
Error: unknown fpga: iCE40-FAKE
```

```
$ apio build --fpga iCE40-FAKE --size 8k
Error: unknown fpga: iCE40-FAKE
```

```
$ apio build --board icezum --fpga iCE40-FAKE
Error: unknown fpga: iCE40-FAKE
```

## apio upload

Upload bitstream to FPGA. Same arguments that *build* + device argument.

### Testing

#### Correct arguments

NOTE: if the correct board is not connected a 'board not detected' error will be thrown.

E.g.

```
$ apio upload
[...] Processing icezum
```

```
$ apio upload --board icestick
[...] Processing icestick
```

```
$ apio upload --board icestick --device 1
[...] Processing icestick
```

```
$ apio upload --device 1
[...] Processing icezum
```

```
$ apio upload --device 1 --fpga iCE40-HX1K-VQ100
[...] Processing custom board
```

```
$ apio upload --device 1 --type lp --size 8k --pack cm225:4k
[...] Processing custom board
```

#### Insufficient arguments

Command not executed. Print an error message

E.g.

```
$ apio upload --size 8k
Error: insufficient arguments: missing device, type, pack
```

```
$ apio upload --fpga iCE40-HX1K-VQ100
Error: insufficient arguments: missing device
```

## apio time

Bitstream timing analysis. Same arguments that *build*.

### Testing

E.g.

```
$ apio time
```